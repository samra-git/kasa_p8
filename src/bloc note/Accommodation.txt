import React, { useEffect, useState } from "react";
import Header from "../layouts/Header";
import Footer from "../layouts/Footer";
import RentGallery from "../components/RentGallery";
import CardAcc from "../components/CardAcc";
import dataBase from "../data/db-kasa.json";
import { useParams } from "react-router-dom";

const Accommodation = () => {
  const [card, setCard] = useState([]);
  const { getId } = useParams(); // Utilisez la fonction useParams pour obtenir les paramètres de l'URL
  const [cardId, setCardId] = useState(null); // Utilisez un état pour stocker la carte correspondant à l'ID

  useEffect(() => {
    // Utilisez une fonction pour obtenir l'élément correspondant à l'ID
    const getCardById = () => {
      const foundCard = dataBase.find((theId) => theId.id === getId());
      setCardId(foundCard);
    };

    getCardById(); // Appelez la fonction pour obtenir la carte correspondant à l'ID

    // Mettez à jour le state card avec l'ensemble des données si nécessaire
    setCard(dataBase);
  }, [getId]); // Ajoutez getId comme dépendance pour que useEffect soit rappelé lorsque l'ID change

  return (
    <div>
      <Header />
      <div>
        {/* Utilisez cardId.title seulement si cardId existe */}
        {cardId && <>{cardId.title}</>}
      </div>
      {/* Utilisez cardId seulement si cardId existe */}
      {cardId && <CardAcc key={cardId.id} itemAcc={cardId} />}

      <Footer />
    </div>
  );
};

export default Accommodation;
